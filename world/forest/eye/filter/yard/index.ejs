<style>
    <%- include("./yard.css"); %>
</style>

<div class="yard">
    <div class="sky">
        <h4>The Yard</h4>
        
        <div class="ray"></div>
        <div class="ray"></div>
        <div class="ray"></div>
        <div class="ray"></div>
        <div class="ray"></div>
        <div class="sun"></div>
    </div>

    <div class="ground">
    </div>
</div>

<section class="porch">
    <input type="text" class="mailbox">
</section>

<hr>

<a class="go" href="/forest/eye/filter/living-room">
    Enter the House
</a>

<a class="go" href="/forest/eye/filter/tree-house">
    Climb up the nearby Tree House
</a>

<hr>

<a class="to" href="/forest/eye/filter/cave">
    Go to Cave
</a>

<a class="to" href="/forest/eye/filter/tower">
    Go to the Tower
</a>

<a class="to" href="/forest/eye/town-hall">
    Go to the Town Hall
</a>

<hr>

<a class="return" href="/forest/eye/library">
    Return to the Library
</a>

<a class="return" href="/forest/eye/church">
    Return to the Church
</a>

<script src="/js/util/weather.js"></script>
<script src="/js/entity.js"></script>
<script src="/js/plants/part.js"></script>
<script>
    const weather = new WeatherSystem();

    //yard
    <%- include("./yard.js"); %>
    let yard = new Yard();

    const $mailbox = $(".mailbox");
    let mailboxCD = 1000;
    let lastMailboxUpdate = 0;

    base.load("house-mailbox").then((res) => {
        if (typeof res == "string") $mailbox.val(res);
        console.log(res);
    });

    $mailbox.on("input", (e) => { 
        lastMailboxUpdate = Date.now();

        setTimeout(() => {
            let now = Date.now();
            if (now - lastMailboxUpdate > mailboxCD) {
                console.log(now - lastMailboxUpdate, e.currentTarget.value);
                base.do("set-mailbox", { item: e.currentTarget.value });
            }
        }, mailboxCD);
    });
</script>