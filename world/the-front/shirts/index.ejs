<style>
    <%- include("./index.css") %>
</style>

<h1>Nother Shirts</h1>

<% if (user?.memory && user.memory.data.authLevels.includes("SHIRTSAD")) { %>
    <div class="meta"></div>
    <script src="/js/util/element.js"></script>
    <script src="/js/util/buttons.js"></script>
    <script src="/js/util/search-box.js"></script>
    <script src="/js/util/browser.js"></script>
    <script>
        const metaOrders = new MetaBrowser({
            header: "Orders"
        });
        metaOrders.render();
        metaOrders.addService("shirt-orders", {
            fields: new NBField({
                name: "order",
                label: "Order: ",
                placeholder: "No order"
            }, [
                new NBField({
                    name: "name",
                    label: "Name: ",
                    placeholder: "Name",
                    type: "string"
                }),
                new NBField({
                    name: "short",
                    label: "Short Description: ",
                    placeholder: "No Description",
                    type: "string"
                }),
                new NBField({
                    name: "long",
                    label: "Long Description: ",
                    placeholder: "No Description",
                    type: "string"
                })
            ]),
            label: "Orders",
            editable: true,
            multiple: true,
            toLoad: async () => {
                let res = await base.loadAll("shirt-orders", "global");
                return res;
            },
            toSave: async (item, deleting) => {
                return await base.do("save-order", { item, deleting });
            }
        });
    </script>
<% } %>

<h2>Inventory</h2>
<section class="inventory">
    <div class="design">
        <img src="/img/shirts/antique_sapphire.jpg">
        <img src="/img/shirts/heart.png" class="heart">
        <img src="/img/shirts/verses/written on heart front.png" class="verse">
    </div>
    <select id="verse">
        <option value="front">Heb 8:10b</option>
    </select>
    <select id="color">
        <option value="white">White</option>
        <option value="gray">Gray</option>
        <option value="red">Red</option>
        <option value="blue">Blue</option>
    </select>
    <select id="size">
        <option value="s">S</option>
        <option value="m">M</option>
        <option value="l">L</option>
        <option value="xl">XL</option>
        <option value="2xl">2XL</option>
        <option value="3xl">3XL</option>
    </select>
    <div class="amount">
        <input type="number" placeholder="0">/<div class="stock">0</div>
    </div>
    <button class="add">Add to Cart</button>
</section>

<h2>Cart</h2>
<section class="cart">
    <div class="items"></div>
    <div class="info"></div>
    <button>Checkout</button>
</section>


<!-- <div class="login-cover">
    <a class="header-link" href="/">
        <img src="/img/logo.png">
        <h1>NotherBase</h1>
    </a>
    <div class="form">
        <h3>Login to Your Account</h3>
        <label>
            <h4>Your Name:</h4>
            <input type="text" placeholder="Username" id="username">
        </label>
        <label>
            <h4>Your Password:</h4>
            <input type="password" placeholder="password" id="pass">
        </label>
        <button id="login" onclick="coverLogin()">Login</button>
        <a href="https://www.notherbase.com/the-front/keeper">Reset Password</a>
    </div>
    <p class="info"></p>

    <script>
        let $username = $(".login-cover #username");
        let $pass = $(".login-cover #pass");
        let $form = $(".login-cover .form");
        let $info = $(".login-cover .info");

        const coverLogin = async () => {
            let username = $username.val();
            $username.val("");
            let pass = $pass.val();
            $pass.val("");

            $form.addClass("invisible");
            $info.text("Attempting to login...");

            let response = await base.attemptLogin(username, pass);

            $info.text(response.message);

            if (response.status === "success") location.reload();
            else {
                $form.removeClass("invisible");
                $username.focus();
                $username.val(username);
            }
        };

        $username.keypress(function (e) {
            if (e.which == 13) {
                coverLogin();
                e.stopPropagation();
            }
        });

        $pass.keypress(function (e) {
            if (e.which == 13) {
                coverLogin();
                e.stopPropagation();
            }
        });
    </script>
</div> -->